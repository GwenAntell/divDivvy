<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Divide taxonomic occurrence data into geographic regions of fair 
    comparison, according to three customizable standardization methods. 
    Calculate common biodiversity and range-size metrics on subsampled data.">
<title>Spatial Subsampling of Biodiversity Occurrence Data • divvy</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Spatial Subsampling of Biodiversity Occurrence Data">
<meta property="og:description" content="Divide taxonomic occurrence data into geographic regions of fair 
    comparison, according to three customizable standardization methods. 
    Calculate common biodiversity and range-size metrics on subsampled data.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">divvy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-getting-started">Getting started</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-getting-started">
    <a class="dropdown-item" href="articles/subsampling-vignette.html">Subsampling tutorial</a>
    <a class="dropdown-item" href="articles/habitat-rangesize-case-study.html">Range size case study</a>
    <a class="dropdown-item" href="articles/subsampling-concept-walkthrough.html">Conceptual walkthrough</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/GawainAntell/divvy/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="divvy">divvy<a class="anchor" aria-label="anchor" href="#divvy"></a>
</h1></div>
<!-- badges: start -->

<p><img src="reference/figures/divvy_hex_sticker.png" width="300px" align="right"></p>
<p>Divvy up diversity into geographic regions of fair comparison!</p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>An R package offering spatial subsampling functions for biogeography and biodiversity studies, whether analysing fossil or modern taxon occurrence data. Three types of subsampling are available to to standardise the number and maximum spread (dispersion) of sites within a region of specified size:</p>
<ul>
<li><p><code>cookies</code>: Imposes a radial constraint on the spatial bounds of a subsample and standardises area by rarefying the number of localities</p></li>
<li><p><code>clustr</code>: Aggregates sites that are nearest neighbours (connecting them with a minimum spanning tree) to impose a maximum diameter on the spatial bounds of a subsample, and optionally rarefies localities</p></li>
<li><p><code>bandit</code>: Rarefies the number of localities within bands of equal latitude</p></li>
</ul>
<p>Additional functions include <code>uniqify</code> to subset an occurrence dataset to unique taxon-coordinate combinations, <code>sdSumry</code> to calculate basic spatial coverage and diversity metadata for a dataset or its subsamples, <code>rangeSize</code> to calculate five measures of geographic range size, and <code>classRast</code> to generate a raster containing the most common environment or trait for point occurrences falling in each grid cell.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of divvy from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages('devtools')</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">'GawainAntell/divvy'</span><span class="op">)</span></span></code></pre></div>
<p>There are two vignettes accompanying the package. To build the vignettes while downloading the development version, and then view them as compiled documents, use:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">'GawainAntell/divvy'</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/browseVignettes.html" class="external-link">browseVignettes</a></span><span class="op">(</span><span class="st">'divvy'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage-examples">Usage examples<a class="anchor" aria-label="anchor" href="#usage-examples"></a>
</h2>
<div class="section level3">
<h3 id="bivalves-package-data">
<code>bivalves</code>: Package data<a class="anchor" aria-label="anchor" href="#bivalves-package-data"></a>
</h3>
<p>(Palaeo)ecologists often want to inspect basic information about taxon occurrence datasets such as number of occurrences, number of unique localities, general size and position of the study region, and biodiversity. This may be an initial step to become acquainted with the data, or it may be a final step of analysis to estimate ecological variables of interest. Let’s load one of the example datasets in with <code>divvy</code> to demonstrate some functions that may help analyse it. The occurrences are latitude-longitude point coordinates of Pliocene bivalves from the Paleobiology Database; before proceeding further, let’s rasterise these into an equal-area grid, a common starting point for biogeography analysis.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gawainantell.github.io/divvy/">divvy</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">'bivalves'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># initialise Equal Earth projected coordinates</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="va">rWorld</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">prj</span> <span class="op">&lt;-</span> <span class="st">'EPSG:8857'</span></span>
<span><span class="va">rPrj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/project.html" class="external-link">project</a></span><span class="op">(</span><span class="va">rWorld</span>, <span class="va">prj</span>, res <span class="op">=</span> <span class="fl">200000</span><span class="op">)</span> <span class="co"># 200,000m is approximately 2 degrees</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/values.html" class="external-link">values</a></span><span class="op">(</span><span class="va">rPrj</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/dimensions.html" class="external-link">ncell</a></span><span class="op">(</span><span class="va">rPrj</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># coordinate column names for the current and target coordinate reference system</span></span>
<span><span class="va">xyCartes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'paleolng'</span>,<span class="st">'paleolat'</span><span class="op">)</span></span>
<span><span class="va">xyCell</span>   <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'cellX'</span>,<span class="st">'cellY'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># extract cell number and centroid coordinates associated with each occurrence</span></span>
<span><span class="va">llOccs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="va">bivalves</span>, geom <span class="op">=</span> <span class="va">xyCartes</span>, crs <span class="op">=</span> <span class="st">'epsg:4326'</span><span class="op">)</span></span>
<span><span class="va">prjOccs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/project.html" class="external-link">project</a></span><span class="op">(</span><span class="va">llOccs</span>, <span class="va">prj</span><span class="op">)</span></span>
<span><span class="va">bivalves</span><span class="op">$</span><span class="va">cell</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/cells.html" class="external-link">cells</a></span><span class="op">(</span><span class="va">rPrj</span>, <span class="va">prjOccs</span><span class="op">)</span><span class="op">[</span>,<span class="st">'cell'</span><span class="op">]</span></span>
<span><span class="va">bivalves</span><span class="op">[</span>, <span class="va">xyCell</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/xyCellFrom.html" class="external-link">xyFromCell</a></span><span class="op">(</span><span class="va">rPrj</span>, <span class="va">bivalves</span><span class="op">$</span><span class="va">cell</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="uniqify-subset-to-unique-occurrences">
<code>uniqify</code>: Subset to unique occurrences<a class="anchor" aria-label="anchor" href="#uniqify-subset-to-unique-occurrences"></a>
</h3>
<p>Now let’s examine the data with some <code>divvy</code> functions. First, we can apply <code>uniqify</code> to leave out any duplicate occurrences of a taxon within a grid cell. This shortens the dataset (and thereby reduces memory use) by more than half.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">bivalves</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 8095</span></span>
<span><span class="va">bivalves</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/uniqify.html">uniqify</a></span><span class="op">(</span><span class="va">bivalves</span>, taxVar <span class="op">=</span> <span class="st">'genus'</span>, xy <span class="op">=</span> <span class="va">xyCell</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">bivalves</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3061</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="sdsumry-summary-spatial-and-diversity-metrics">
<code>sdSumry</code>: Summary spatial and diversity metrics<a class="anchor" aria-label="anchor" href="#sdsumry-summary-spatial-and-diversity-metrics"></a>
</h3>
<p>How many taxa are there? Over how many sites (equal-area grid cells)? How many degrees of latitude do those sites span? The <code>sdSumry</code> function returns this and related spatial and diversity metadata.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/sdSumry.html">sdSumry</a></span><span class="op">(</span><span class="va">bivalves</span>, taxVar <span class="op">=</span> <span class="st">'genus'</span>, xy <span class="op">=</span> <span class="va">xyCell</span>, crs <span class="op">=</span> <span class="va">prj</span><span class="op">)</span></span>
<span><span class="co">#&gt;      nOcc nLoc centroidX centroidY latRange greatCircDist meanPairDist</span></span>
<span><span class="co">#&gt; [1,] 3061  157 -434404.9   1647720 137.4159      28917.12     11375.07</span></span>
<span><span class="co">#&gt;      minSpanTree     SCOR nTax</span></span>
<span><span class="co">#&gt; [1,]    93349.91 20.64401  550</span></span></code></pre></div>
<p>There are just over 3000 unique taxon-site occurrences, including 550 genera from 157 grid cells across 137 degrees latitude.</p>
</div>
<div class="section level3">
<h3 id="rangesize-calculate-geographic-range-size">
<code>rangeSize</code>: Calculate geographic range size<a class="anchor" aria-label="anchor" href="#rangesize-calculate-geographic-range-size"></a>
</h3>
<p>Maybe we aren’t interested in community ecology and instead care about the geographic distribution of focal taxa, such as the mussel <em>Mytilus</em> and scallop <em>Yabepecten</em>. Provide the coordinates for these two taxa to <code>divvy</code>’s <code>rangeSize</code> function:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myti</span> <span class="op">&lt;-</span> <span class="va">bivalves</span><span class="op">[</span><span class="va">bivalves</span><span class="op">$</span><span class="va">genus</span> <span class="op">==</span> <span class="st">'Mytilus'</span>,    <span class="va">xyCell</span><span class="op">]</span></span>
<span><span class="va">yabe</span> <span class="op">&lt;-</span> <span class="va">bivalves</span><span class="op">[</span><span class="va">bivalves</span><span class="op">$</span><span class="va">genus</span> <span class="op">==</span> <span class="st">'Yabepecten'</span>, <span class="va">xyCell</span><span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="reference/rangeSize.html">rangeSize</a></span><span class="op">(</span><span class="va">myti</span>, crs <span class="op">=</span> <span class="va">prj</span><span class="op">)</span></span>
<span><span class="co">#&gt;      nLoc centroidX centroidY latRange greatCircDist meanPairDist minSpanTree</span></span>
<span><span class="co">#&gt; [1,]   18  67152.05   4750551 99.31458      22351.73     10390.96    37303.68</span></span>
<span><span class="fu"><a href="reference/rangeSize.html">rangeSize</a></span><span class="op">(</span><span class="va">yabe</span>, crs <span class="op">=</span> <span class="va">prj</span><span class="op">)</span></span>
<span><span class="co">#&gt;      nLoc centroidX centroidY latRange greatCircDist meanPairDist minSpanTree</span></span>
<span><span class="co">#&gt; [1,]    2  11856041   5039440 1.808585           200          200         200</span></span></code></pre></div>
<p><em>Mytilus</em> is observed in 18 grid cells spread over tens of thousands of kilometers. In contrast, <em>Yabepecten</em> occurs in only two localities, 200 km apart at their grid cell centroids.</p>
<p>If we back-transform the two locality’s coordinates from Equal Earth projection to familiar latitude-longitude, we can tell <em>Yabepecten</em> has been reported only in northern Honshu, Japan (140-141 E longitude, 40-42 N latitude).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">yabeVect</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="va">yabe</span>, geom <span class="op">=</span> <span class="va">xyCell</span>, crs <span class="op">=</span> <span class="va">prj</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/project.html" class="external-link">project</a></span><span class="op">(</span><span class="va">yabeVect</span>, <span class="st">'epsg:4326'</span><span class="op">)</span></span>
<span><span class="co">#&gt;  class       : SpatVector </span></span>
<span><span class="co">#&gt;  geometry    : points </span></span>
<span><span class="co">#&gt;  dimensions  : 2, 0  (geometries, attributes)</span></span>
<span><span class="co">#&gt;  extent      : 139.6679, 141.3001, 40.16519, 41.97377  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt;  coord. ref. : lon/lat WGS 84 (EPSG:4326)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="cookies-subsample-global-data-into-equivalent-regions">
<code>cookies</code>: Subsample global data into equivalent regions<a class="anchor" aria-label="anchor" href="#cookies-subsample-global-data-into-equivalent-regions"></a>
</h3>
<p>The <code>bivalves</code> dataset spans most of the world’s oceans. If we were interested in a question such as how diversity at this Pliocene time step compares against diversity from an earlier interval when geographic sampling coverage was much more limited, we’d have to account for this different data distribution—otherwise, we’d unfairly estimate the well-sampled Pliocene to be far more diverse. Geographic standardisation of both area (acreage or number of sites studied) and dispersion (amount sites are spread apart) allows fair comparisons of ecological variables like richness, whether between time steps, environments, or other comparison groups with heterogeneous spatial coverage.</p>
<p><code>divvy</code> offers three functions for subsampling (<code>cookies</code>, <code>clustr</code>, and <code>bandit</code>) which differ in how they standardise for dispersion. The easiest form of subsampling to visualise is applying a circular constraint to define the bounds of a subsample region. Within that region, a given number of sites are selected, to standardise area. Here, let’s take 10 subsamples of the <code>bivalves</code> occurrences, each containing 12 sites within a circular region of 1500km (about the size of Australia.)</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">circLocs</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cookies.html">cookies</a></span><span class="op">(</span>dat <span class="op">=</span> <span class="va">bivalves</span>, xy <span class="op">=</span> <span class="va">xyCell</span>, </span>
<span>                    iter <span class="op">=</span> <span class="fl">10</span>, nSite <span class="op">=</span> <span class="fl">12</span>, r <span class="op">=</span> <span class="fl">1500</span>, </span>
<span>                    crs <span class="op">=</span> <span class="va">prj</span>, output <span class="op">=</span> <span class="st">'full'</span><span class="op">)</span></span></code></pre></div>
<p>Below is a map of one possible subsample (red, with regional constraint drawn around it). Sites not included in the subsample, including one within the regional constraint, are plotted in blue.</p>
<p><img src="reference/figures/bivalves-subsample-map.png" width="600px" align="center"></p>
<p>An individual subsample (one <code>data.frame</code> element of the returned <code>list</code> object) contains all occurrences from the subsampled sites. Here’s a peek at the first subsample, to show it’s just a subset of <code>bivalves</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">circLocs</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    338 obs. of  12 variables:</span></span>
<span><span class="co">#&gt;  $ genus        : chr  "Anomia" "Chlamys" "Mercenaria" "Ostrea" ...</span></span>
<span><span class="co">#&gt;  $ paleolng     : num  -80.5 -80.5 -80.5 -80.5 -87.4 ...</span></span>
<span><span class="co">#&gt;  $ paleolat     : num  27.5 27.5 27.5 27.5 31 ...</span></span>
<span><span class="co">#&gt;  $ collection_no: int  41496 41496 41496 41496 41824 58893 58893 58893 58893 58893 ...</span></span>
<span><span class="co">#&gt;  $ reference_no : int  11119 11119 11119 11119 11118 16700 16700 16700 16700 16700 ...</span></span>
<span><span class="co">#&gt;  $ environment  : chr  "marine indet." "marine indet." "marine indet." "marine indet." ...</span></span>
<span><span class="co">#&gt;  $ max_ma       : num  5.33 5.33 5.33 5.33 5.33 ...</span></span>
<span><span class="co">#&gt;  $ min_ma       : num  3.6 3.6 3.6 3.6 3.6 ...</span></span>
<span><span class="co">#&gt;  $ accepted_name: chr  "Anomia simplex" "Chlamys" "Mercenaria campechiensis" "Ostrea" ...</span></span>
<span><span class="co">#&gt;  $ cell         : num  4178 4178 4178 4178 3832 ...</span></span>
<span><span class="co">#&gt;  $ cellX        : num  -7343959 -7343959 -7343959 -7343959 -7743959 ...</span></span>
<span><span class="co">#&gt;  $ cellY        : num  3539440 3539440 3539440 3539440 3939440 ...</span></span></code></pre></div>
<p>Because each subsample has the same information structure as the original dataset, we can analogously calculate summary spatial and diversity data for them using <code>sdSumry</code>. Each row of the returned matrix corresponds to one of the ten subsamples. In this small group of replicate subsamples, regional richness ranges from 117 to 194 genera. The number of localities is always 12, as was specified above, and the dispersion of subsamples is always within the upper bound set by the diameter of 3,000km (e.g. maximum great circle distance across any subsample’s sites is 2807km).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/sdSumry.html">sdSumry</a></span><span class="op">(</span><span class="va">circLocs</span>, taxVar <span class="op">=</span> <span class="st">'genus'</span>, xy <span class="op">=</span> <span class="va">xyCell</span>, crs <span class="op">=</span> <span class="va">prj</span><span class="op">)</span></span>
<span><span class="co">#&gt;    nOcc nLoc   centroidX centroidY latRange greatCircDist meanPairDist</span></span>
<span><span class="co">#&gt; 1   338   12  -6977292.4   4156106 10.25901      1612.452     781.6607</span></span>
<span><span class="co">#&gt; 2   265   12 -10160625.7   4072773 17.14477      2039.608     910.6453</span></span>
<span><span class="co">#&gt; 3   410   12  -6727292.4   2356106 17.67042      2720.294    1289.9956</span></span>
<span><span class="co">#&gt; 4   252   12 -10127292.4   3889440 18.77490      2209.072     888.0877</span></span>
<span><span class="co">#&gt; 5   460   12  -6993959.1   4056106 11.91278      1720.465     757.5157</span></span>
<span><span class="co">#&gt; 6   446   12    406040.9   5589440 11.37344      1562.050     833.9107</span></span>
<span><span class="co">#&gt; 7   293   12 -10177292.4   4239440 20.61302      2408.319     866.7620</span></span>
<span><span class="co">#&gt; 8   224   12 -10127292.4   5239440 27.00700      2807.134    1119.3347</span></span>
<span><span class="co">#&gt; 9   446   12    406040.9   5589440 11.37344      1562.050     833.9107</span></span>
<span><span class="co">#&gt; 10  350   12    256040.9   5389440 14.91345      1811.077    1047.1642</span></span>
<span><span class="co">#&gt;    minSpanTree     SCOR nTax</span></span>
<span><span class="co">#&gt; 1     2814.214 33.87300  141</span></span>
<span><span class="co">#&gt; 2     2800.000 26.46397  121</span></span>
<span><span class="co">#&gt; 3     4097.770 40.52424  194</span></span>
<span><span class="co">#&gt; 4     2847.214 25.14927  117</span></span>
<span><span class="co">#&gt; 5     2731.371 48.65573  166</span></span>
<span><span class="co">#&gt; 6     3402.094 44.22359  190</span></span>
<span><span class="co">#&gt; 7     2965.685 29.02605  130</span></span>
<span><span class="co">#&gt; 8     3665.081 21.11620  121</span></span>
<span><span class="co">#&gt; 9     3402.094 44.22359  190</span></span>
<span><span class="co">#&gt; 10    4287.575 33.92261  163</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing divvy</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Gawain Antell <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0002-1948-6624" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/GawainAntell/divvy/actions/workflows/test-coverage.yaml" class="external-link"><img src="https://github.com/GawainAntell/divvy/actions/workflows/test-coverage.yaml/badge.svg" alt="test-coverage"></a></li>
<li><a href="https://codecov.io/gh/GawainAntell/divvy" class="external-link"><img src="https://codecov.io/gh/GawainAntell/divvy/graph/badge.svg?token=SEJWHTUBB1" alt="codecov"></a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>

<div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/GawainAntell/divvy/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/GawainAntell/divvy/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Gawain Antell.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
